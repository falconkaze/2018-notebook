# lambda表达式
[Java 8 新特性：Lambda 表达式](https://blog.csdn.net/sun_promise/article/details/51121205)
[Java 8系列之Lambda表达式](https://blog.csdn.net/io_field/article/details/54380200)
### 函数式语言
在函数式编程语言中，函数是一等公民，可以独立存在，可以将其赋值给一个变量，或将他们当做参数传给其他函数。函数式语言提供了一种强大的功能——闭包，相比于传统的编程方法有很多优势，闭包是一个可调用的对象，它记录了一些信息，这些信息来自于创建它的作用域。lambda表达式就是java语言中最接近闭包的概念。
在Java语言中，Lambda表达式是对象，他们必须依附于一类特别的对象类型——函数式接口。
### 函数式接口
函数式接口（SAM，Single Abstract Method）是只包含一个抽象方法的接口。一般来说，这个抽象方法指明了接口的目标用途。因此，函数式接口通常表示单个动作（eg：Runnable是一个函数式接口，只定义了一个方法run()，因此run方法定义了Runnable的动作）。函数式接口定义了lambda表达式的目标类型，但是lambda表达式只能用于其目标类型已经被制定的上下文中。
* 在java8中，引入了一个新注解：@FunctionalInterface。可以在任何函数式接口上面使用@FunctionalInterface来标识它是一个函数式接口，该接口只能有一个抽象方法，但该注解不是强制的。
* 当lambda表达式被转换成一个函数式接口的实例时，需要处理检查时异常。比如Runnable的run()方法没有抛出异常，如果run方法内包含检查时异常时，必须使用try—catch语句。
* Callable是可以抛出任何异常，并且有返回值。

**注意**：
函数式接口可以定义Object定义的任何公有方法，而不影响其作为函数式接口的状态，Object的共有方法被视为函数式接口的隐式成员，因为函数式接口的实例会默认自动实现它们。
默认方法和静态方法不会违反函数式接口的约定。
### Lambda表达式
##### 简介
在Java中，Lambda 表达式 (lambda expression)是一个匿名函数。

Lambda表达式基于数学中的λ演算得名，直接对应于其中的Lambda抽象(lambda abstraction)，是一个匿名函数，即没有函数名的函数。Lambda表达式可以表示闭包，但又不同于函数式语言的闭包。Lambda表达式让代码变得简洁并且允许你传递行为，在java8出现之前传递行为的方法只有通过匿名内部类。

Lambda表达式的Java实现：第一个就是Lambda表达式自身，第二个是函数式接口。

Lambda表达式本质上就是一个匿名(即未命名的方法)。但是这个方法是不能独立执行的，而是用于实现由函数式接口定义的一个方法（即：使用 Lambda 表达式实例化函数式接口）。因此，Lambda表达式会导致产生一个匿名类。

Lambda表达式不是独立执行的，而是构成了一个函数式接口定义的抽象方法的实现，该函数式接口定义了它的目标类型。结果，只有在定义了lambda表达式的目标类型的上下文中，才能使用该表达式。当把一个lambda表达式赋给一个函数式接口的引用时，就创建了这样的上下文。

当目标类型上下文中出现lambda表达式时，就会自动创建实现了函数式接口的一个类的实例(类似于匿名类)，函数式接口声明的抽象方法的行为由lambda表达式定义。当通过目标调用该方法时，就会执行lambda表达式。
为了在目标类型上下文中使用lambda表达式，抽象方法的类型和lambda表达式的类型必须兼容。eg:如果抽象方法指定了两个int类型的参数，那么lambda表达式也必须执行两个参数，其类型要么被显示指定为int类型，要么在上下文中可以被隐式的推断为int类型。总的来讲，lambda表达式的参数的类型和数量必须与函数式接口内的抽象方法的参数兼容；返回类型必须兼容；并且lambda表达式可能抛出的异常必须能被该方法接受。
##### 优点
lambda表达式的应用使代码变得更加紧凑，可读性增强；Lambda表达式使并行操作大集合变得更方便，可以充分发挥多核CPU的优势，更易于为多核处理器编写代码。
##### 结构
Lambda 表达式由三个部分组成：
1. 一个括号内用逗号分隔的形式参数，参数是函数式接口里面方法的参数；
2. 一个箭头符号：->；
3. 方法体，可以是表达式和代码块。

**语法**:
* 方法体为表达式，该表达式的值作为返回值返回。parameters)-> expression
* 方法体为代码块，必须用{}来包裹起来，且需要一个return返回值，但若函数式接口里面方法返回值是void，则无需返回值。(parameters) -> { statements; }

**注意**
1. 一个Lambda表达式可以有零个或多个参数
2. 参数的类型既可以明确声明，也可以根据上下文来推断。
3. 所有参数需包含在圆括号内，参数之间用逗号相隔。
eg：(a, b) 或 (int a, int b)或 (String a, int b, float c)
4. 空圆括号代表参数集为空。  
eg：() -> 50
5. 当只有一个参数，且其类型可推导时，圆括号（）可省略。  
eg：a -> return a*a
6. Lambda表达式的主体可包含零条或多条语句
7. 如果Lambda表达式的主体只有一条语句，花括号{}可省略。匿名函数的返回类型与该主体表达式一致。
8. 如果 Lambda 表达式的主体包含一条以上语句，则表达式必须包含在花括号{}中（形成代码块）。匿名函数的返回类型与代码块的返回类型一致，若没有返回则为空。
9. 对于Lambda表达式中的多个参数，如果需要显示声明一个参数的类型，那么必须为所有的参数都声明类型。
eg：MyNumericTest是一个自定义函数式接口，详情接口代码略，看下面应用的例子：
这样写不合法：MyNumericTest isFactor = (int n,d) -> (n%d)==0;
正确的写法：MyNumericTest isFactor = (int n,int d) -> (n%d)==t0
