# C数据类型

在C语言中，数据类型指的是用于声明不同变量或函数的一个广泛的系统。变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式。

| 类型     | 描述                                                       |
| ---      | ---                                                        |
| 基本类型 | 是算数类型，包括整数类型和浮点数类型                       |
| 枚举类型 | 也是算数类型，用来定义程序中只能赋予一定的离散整数值的变量 |
| void类型 | 类型说明符，void标识没有可用值                             |
| 派生类型 | 包含：指针类型，数组类型，结构类型，共用体类型和函数类型   |

数组类型和结构类型统称为聚合类型。函数的类型指的是函数返回值的类型。

## 整数类型及浮点数类型（`linux gcc x86_64`）

* 整型

  | 类型          | 存储大小 |
  | ---           | ---      |
  | char          | 1字节    |
  | unsigned char | 1字节    |
  | signed char   | 1字节    |
  | short         | 2字节    |
  | int           | 4字节    |
  | unsigned int  | 4字节    |
  | long          | 8字节    |
  | unsigned long | 8字节    |

* 字符类型

  字符常量用扩在单引号中的单个字符来表示。字符常量可以是一个普通的字符`'x'`，一个转义字符`'\t'`，或者一个通用的字符`'\u02C0'`。

  | 转义符    | 含义                       |
  | `\\`      | \字符                      |
  | `\'`      | '字符                      |
  | `\?`      | ?字符                      |
  | `\a`      | 警报铃声                   |
  | `\b`      | 退格键                     |
  | `\f`      | 换页符                     |
  | `\n`      | 换行符                     |
  | `\t`      | 水平制表符                 |
  | `\v`      | 垂直制表符                 |
  | `\ooo`    | 一到三位的八进制数         |
  | `\xhh...` | 一个或多个数字的十六进制数 |

* 浮点数类型

  | 类型        | 存储大小 | 值范围             | 精度     |
  | float       | 4字节    | 1.2E-38~3.4E+38    | 6位小数  |
  | double      | 8字节    | 2.3E-308~1.7E+308  | 15位小数 |
  | long double | 16字节   | 3.4-4932~1.1E+4932 | 19位小数 |

  浮点数是由整数部分，小数点，小数部分和指数部分组成。可以用小数形式和指数形式来标识浮点常量。

  ```c
  3.14159F
  315159D-5L
  ```

  注意：各种类型的存储大小与系统位数有关，目前通用的以64位系统为主。为了得到某个类型或某个变量在特定某个平台的准确大小，可以使用`sizeof`运算符。`sizeof(type)`可以得到对象或类型的存储空间大小。

* 数字变量的写法

  前缀区分进制，后缀区分数字类型。

  1. 整数的不同进制（区分符在数字前）,程序中的十六进制，二进制等都是整数：
    - 默认为十进制：`10,20`
    - 0开头为8进制：`01,023`
    - 0b开头为2进制：`0b101`
    - 0x开头为16进制：`0x90adf`
  2. 不同数据类型区分（区分符在数字后）：
    - 整数默认为int类型，浮点数默认为double类型
    - 表示单精度浮点数：`0.1f`
    - 表示long类型整数：`10L`
    - 表示无符号整数：`80U`
    - char类型：`'a'，'\n'`
    - 字符串常量：`"abc"`
  3. 数字可以使用指数形式来表示，`314159E-5L`

* 强制类型转换

语法：(类型说明符)(表达式)`(int)20L`

* 自动类型转换：

  自动类型转换发生在不同数据类型的数据混合计算的时候。
  - 如果参与运算的类型不同，首先转换成同一类型，转换按数据长度增加的方向进行，以保证精度不降低。（TODO float与long类型进行运算结果类型）
  - 所有浮点数的计算都是以double类型进行，以保证精度不降低
  - char和short类型参与计算时，会自动转为int类型
  - 在赋值运算时，右边的类型会自动转为左边的类型，如果右边的数据类型长度比左边长，就会降低精度，甚至丢失高位数据
  - 浮点数赋值给整数，浮点数小数位被舍去
  - 整数赋值给浮点数，数值不变，类型变为浮点数

* 转义符

## void类型

void类型指定没有可用的值，通常用于以下三种情况：

1. 函数返回为空：`void exit()`
2. 函数参数为空：`int rand(void)`
3. 指针指向void：`void *`

## 字符串类型

  字符串是用双引号括起来的一串字符。一个字符串包含类似于字符常量的字符：普通的字符，转义字符和通用的字符。字符串可以使用空格作为分隔符，把一个很长的字符串进行分行。

  下面三种形式所展示的字符串是相同的
  ```c
  "hello world!"
  "hello \
   world!"
  "hello " "world!"
  ```
