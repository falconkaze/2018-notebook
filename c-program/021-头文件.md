# C头文件

头文件是扩展名为`.h`的文件，包含了C函数的声明和宏定义，被多个源文件中引用共享。有两种类型的头文件：程序员编写的头文件和编译器的头文件。

在程序中要使用头文件，需要使用C预处理指令`#include`来引用它。引用头文件相当于复制头文件的内容。建议在C或C++程序中，把所有的常量，宏，系统全局变量和函数原型写在头文件中，在需要的时候随时引用这些头文件。

## 引用头文件的语法

```C
#include <file> // 引用系统文件，在系统目录的标准列表中搜索名为file的文件。在编译源代码时，可以通-I选项把目录前置在该列表前
#include "file" // 引用用户头文件，在包含当前文件的目录中搜索名为file的文件。在编译源代码时，可以通过-I选项把目录前置在该列表前
```

## 引用头文件的操作

`#include`指令会指示CPP浏览指定的文件作为输入。CPP的输出包含了已经生成的输出，被引用文件生成的输出以及`#include`指令之后的文本输出。

## 注意事项

#### 只引用一次头文件

如果一个头文件被引用两次，编译器会处理两次头文件的内容，这将产生错误。为了防止这种情况，标准的做法是把文件的整个内容放在条件编译语句中。

```C
#ifndef HEADER_FILE
#define HEADER_FILE
#endif
```

这种结构就是通常所说的包装器`#ifndef`。

#### 有条件引用

有时需要从不同的头文件中选择一个引用到程序中，例如，需要指定在不同的操作系统上使用的配置参数。

```C
#if SYSTEM_1
  #include "system_1.h"
#elif SYSTEM_2
  #include "system_2.h"
#endif
```

但是如果头文件比较多的话，这么做不适合。预处理器使用宏来定义文件名的名称，这就是所谓的有条件引用。它不是用头文件的名称作为`#include`的直接参数，用宏名称代替即可。

```C
#define SYSTEM_H "system_1.h"
...
#include SYSTEM_H
```

`SYSTEM_H`会扩展，预处理器会查找`system_1.h`。`SYSTEM_H`可通过-D选项被Makefile定义

#### 全局预处理

在有多个.h文件和多个.c文件的时候，往往我们会用一个global.h的头文件来包含所有的.h文件，然后在除global.h文件外的头文件中包含global.h就可以实现所有头文件的包含。方便在各个文件里面调用其他文件的函数或者变量。

```C
#ifndef _GLOBAL_H
#define _GLOBAL_H
#include <fstream>
#include <iostream>
#include <math.h>
#include <Config.h>
```
